<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 160" width="700" height="160">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e293b;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="amberGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#d97706;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#b45309;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2563eb;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="blueDarkGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1d4ed8;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#1e40af;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#16a34a;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#15803d;stop-opacity:1"/>
    </linearGradient>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000000" flood-opacity="0.4"/>
    </filter>
    <marker id="arrowGray" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#64748b"/>
    </marker>
    <marker id="arrowBlue" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#3b82f6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="700" height="160" fill="url(#bgGrad)" rx="12"/>

  <!-- Title -->
  <text x="350" y="22" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#e2e8f0" text-anchor="middle">Provisioning Automation Pipeline</text>

  <!-- Step labels -->
  <text x="90" y="40" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">① Input</text>
  <text x="358" y="40" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">② Automation</text>
  <text x="620" y="40" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">③ Output</text>

  <!-- ═══ STEP 1: Input ═══ -->
  <rect x="16" y="48" width="148" height="94" rx="8" fill="url(#amberGrad)" filter="url(#shadow)"/>
  <text x="90" y="70" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#fde68a" text-anchor="middle">Service</text>
  <text x="90" y="84" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#fde68a" text-anchor="middle">Requirements</text>
  <text x="90" y="102" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8.5" fill="#fcd34d" text-anchor="middle">Name · VLAN</text>
  <text x="90" y="115" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8.5" fill="#fcd34d" text-anchor="middle">Resources (CPU/RAM)</text>
  <text x="90" y="128" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8.5" fill="#fcd34d" text-anchor="middle">Target node</text>

  <!-- Arrow 1 → 2 -->
  <line x1="164" y1="95" x2="186" y2="95" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrowGray)"/>

  <!-- ═══ STEP 2: Automation group ═══ -->
  <rect x="188" y="36" width="338" height="112" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="1.2" stroke-opacity="0.6" filter="url(#shadow)"/>
  <text x="357" y="52" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="9" font-weight="600" fill="#3b82f6" text-anchor="middle">Python Automation Script</text>

  <!-- Sub-step A: Query NetBox -->
  <rect x="198" y="58" width="96" height="78" rx="6" fill="url(#blueGrad)" filter="url(#shadow)"/>
  <text x="246" y="76" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8.5" font-weight="600" fill="#bfdbfe" text-anchor="middle">Query NetBox</text>
  <text x="246" y="90" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">Next available IP</text>
  <text x="246" y="103" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">in VLAN prefix</text>
  <text x="246" y="116" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">Register allocation</text>
  <text x="246" y="129" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7" fill="#1d4ed8" text-anchor="middle">IPAM</text>

  <!-- Arrow A → B -->
  <line x1="294" y1="97" x2="312" y2="97" stroke="#3b82f6" stroke-width="1.2" marker-end="url(#arrowBlue)"/>

  <!-- Sub-step B: Create Container -->
  <rect x="314" y="58" width="96" height="78" rx="6" fill="url(#blueDarkGrad)" filter="url(#shadow)"/>
  <text x="362" y="76" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8.5" font-weight="600" fill="#bfdbfe" text-anchor="middle">Create Container</text>
  <text x="362" y="90" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">ID = VLAN + IP</text>
  <text x="362" y="103" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">Proxmox API</text>
  <text x="362" y="116" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">LXC from template</text>
  <text x="362" y="129" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7" fill="#93c5fd" text-anchor="middle">deterministic ID</text>

  <!-- Arrow B → C -->
  <line x1="410" y1="97" x2="428" y2="97" stroke="#3b82f6" stroke-width="1.2" marker-end="url(#arrowBlue)"/>

  <!-- Sub-step C: Configure -->
  <rect x="430" y="58" width="86" height="78" rx="6" fill="url(#blueGrad)" filter="url(#shadow)"/>
  <text x="473" y="76" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8.5" font-weight="600" fill="#bfdbfe" text-anchor="middle">Configure</text>
  <text x="473" y="90" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">SSH access</text>
  <text x="473" y="103" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">Timezone (LA)</text>
  <text x="473" y="116" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#93c5fd" text-anchor="middle">Base packages</text>
  <text x="473" y="129" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7" fill="#1d4ed8" text-anchor="middle">via SSH</text>

  <!-- Arrow 2 → 3 -->
  <line x1="526" y1="95" x2="548" y2="95" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrowGray)"/>

  <!-- ═══ STEP 3: Output ═══ -->
  <rect x="550" y="48" width="134" height="94" rx="8" fill="url(#greenGrad)" filter="url(#shadow)"/>
  <text x="617" y="70" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="#bbf7d0" text-anchor="middle">Production-Ready</text>
  <text x="617" y="84" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="#bbf7d0" text-anchor="middle">Container</text>
  <text x="617" y="102" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8" fill="#86efac" text-anchor="middle">IP registered in NetBox</text>
  <text x="617" y="115" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8" fill="#86efac" text-anchor="middle">Deterministic CTID</text>
  <text x="617" y="128" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="8" fill="#86efac" text-anchor="middle">SSH-accessible</text>
  <text x="617" y="137" font-family="'Segoe UI', system-ui, -apple-system, sans-serif" font-size="7.5" fill="#166534" text-anchor="middle">~2 min end-to-end</text>
</svg>
