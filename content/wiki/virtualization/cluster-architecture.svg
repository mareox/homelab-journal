<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 480" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="nodeBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e293b"/>
      <stop offset="100%" style="stop-color:#0f172a"/>
    </linearGradient>
    <linearGradient id="headerBg" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1d4ed8"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000000" flood-opacity="0.4"/>
    </filter>
    <marker id="arrowHA" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#f59e0b"/>
    </marker>
    <symbol id="icon-server" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="2" y="2" width="20" height="8" rx="2"/>
      <rect x="2" y="14" width="20" height="8" rx="2"/>
      <circle cx="6" cy="6" r="1" fill="currentColor" stroke="none"/>
      <circle cx="6" cy="18" r="1" fill="currentColor" stroke="none"/>
      <line x1="10" y1="6" x2="16" y2="6"/>
      <line x1="10" y1="18" x2="16" y2="18"/>
    </symbol>
    <symbol id="icon-database" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <ellipse cx="12" cy="5" rx="9" ry="3"/>
      <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
      <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
    </symbol>
  </defs>

  <!-- Background -->
  <rect width="800" height="480" fill="#0f172a"/>

  <!-- Title -->
  <text x="400" y="28" text-anchor="middle" font-size="16" font-weight="700" fill="#e2e8f0">Proxmox 4-Node Cluster Architecture</text>

  <!-- ===== NODE 2 (top-left) ===== -->
  <g filter="url(#shadow)">
    <rect x="12" y="42" width="188" height="170" rx="8" fill="url(#nodeBg)" stroke="#3b82f6" stroke-width="1.5"/>
  </g>
  <rect x="12" y="42" width="188" height="22" rx="8" fill="url(#headerBg)"/>
  <rect x="12" y="56" width="188" height="8" fill="url(#headerBg)"/>
  <use href="#icon-server" x="16" y="45" width="14" height="14" color="#bfdbfe"/>
  <text x="110" y="57" text-anchor="middle" font-size="11" font-weight="700" fill="#ffffff">Node 2</text>
  <!-- Storage label -->
  <rect x="20" y="70" width="172" height="16" rx="4" fill="#1e3a5f"/>
  <use href="#icon-database" x="23" y="72" width="11" height="11" color="#93c5fd"/>
  <text x="110" y="81" text-anchor="middle" font-size="9" fill="#93c5fd">LVM-thin SSD</text>
  <!-- Containers -->
  <rect x="20" y="91" width="172" height="16" rx="4" fill="#172554"/>
  <text x="106" y="102" text-anchor="middle" font-size="9" fill="#bfdbfe">PBS Backup</text>
  <rect x="20" y="112" width="172" height="16" rx="4" fill="#172554"/>
  <text x="106" y="123" text-anchor="middle" font-size="9" fill="#bfdbfe">Python Dev</text>
  <rect x="20" y="133" width="172" height="16" rx="4" fill="#172554"/>
  <text x="106" y="144" text-anchor="middle" font-size="9" fill="#bfdbfe">UpSnap</text>
  <!-- Node type badge -->
  <text x="106" y="204" text-anchor="middle" font-size="8" fill="#64748b">pve-mini2</text>

  <!-- ===== NODE 3 (top-right) ===== -->
  <g filter="url(#shadow)">
    <rect x="212" y="42" width="188" height="200" rx="8" fill="url(#nodeBg)" stroke="#3b82f6" stroke-width="1.5"/>
  </g>
  <rect x="212" y="42" width="188" height="22" rx="8" fill="url(#headerBg)"/>
  <rect x="212" y="56" width="188" height="8" fill="url(#headerBg)"/>
  <use href="#icon-server" x="216" y="45" width="14" height="14" color="#bfdbfe"/>
  <text x="310" y="57" text-anchor="middle" font-size="11" font-weight="700" fill="#ffffff">Node 3</text>
  <rect x="220" y="70" width="172" height="16" rx="4" fill="#1e3a5f"/>
  <use href="#icon-database" x="223" y="72" width="11" height="11" color="#93c5fd"/>
  <text x="310" y="81" text-anchor="middle" font-size="9" fill="#93c5fd">ZFS Pool</text>
  <rect x="220" y="91" width="172" height="16" rx="4" fill="#172554"/>
  <text x="306" y="102" text-anchor="middle" font-size="9" fill="#bfdbfe">Semaphore</text>
  <rect x="220" y="112" width="172" height="16" rx="4" fill="#172554"/>
  <text x="306" y="123" text-anchor="middle" font-size="9" fill="#bfdbfe">CF-Tunnel</text>
  <rect x="220" y="133" width="172" height="16" rx="4" fill="#172554"/>
  <text x="306" y="144" text-anchor="middle" font-size="9" fill="#bfdbfe">NetBox</text>
  <rect x="220" y="154" width="172" height="16" rx="4" fill="#172554"/>
  <text x="306" y="165" text-anchor="middle" font-size="9" fill="#bfdbfe">PostgreSQL</text>
  <!-- DNS-Primary green highlight -->
  <rect x="220" y="175" width="172" height="16" rx="4" fill="#14532d" stroke="#22c55e" stroke-width="1"/>
  <text x="306" y="186" text-anchor="middle" font-size="9" fill="#bbf7d0">DNS-Primary (HA)</text>
  <text x="306" y="234" text-anchor="middle" font-size="8" fill="#64748b">pve-mini3</text>

  <!-- ===== NODE 5 (bottom-left) ===== -->
  <g filter="url(#shadow)">
    <rect x="412" y="42" width="188" height="215" rx="8" fill="url(#nodeBg)" stroke="#3b82f6" stroke-width="1.5"/>
  </g>
  <rect x="412" y="42" width="188" height="22" rx="8" fill="url(#headerBg)"/>
  <rect x="412" y="56" width="188" height="8" fill="url(#headerBg)"/>
  <use href="#icon-server" x="416" y="45" width="14" height="14" color="#bfdbfe"/>
  <text x="510" y="57" text-anchor="middle" font-size="11" font-weight="700" fill="#ffffff">Node 5</text>
  <rect x="420" y="70" width="172" height="16" rx="4" fill="#1e3a5f"/>
  <use href="#icon-database" x="423" y="72" width="11" height="11" color="#93c5fd"/>
  <text x="510" y="81" text-anchor="middle" font-size="9" fill="#93c5fd">LVM-thin SSD</text>
  <!-- VM with purple -->
  <rect x="420" y="91" width="172" height="16" rx="4" fill="#3b0764" stroke="#a855f7" stroke-width="1"/>
  <text x="506" y="102" text-anchor="middle" font-size="9" fill="#e9d5ff">Graylog VM</text>
  <rect x="420" y="112" width="172" height="16" rx="4" fill="#172554"/>
  <text x="506" y="123" text-anchor="middle" font-size="9" fill="#bfdbfe">n8n</text>
  <rect x="420" y="133" width="172" height="16" rx="4" fill="#172554"/>
  <text x="506" y="144" text-anchor="middle" font-size="9" fill="#bfdbfe">Caddy-2</text>
  <rect x="420" y="154" width="172" height="16" rx="4" fill="#172554"/>
  <text x="506" y="165" text-anchor="middle" font-size="9" fill="#bfdbfe">NFS-2</text>
  <!-- DNS-Secondary green highlight -->
  <rect x="420" y="175" width="172" height="16" rx="4" fill="#14532d" stroke="#22c55e" stroke-width="1"/>
  <text x="506" y="186" text-anchor="middle" font-size="9" fill="#bbf7d0">DNS-Secondary (HA)</text>
  <text x="506" y="249" text-anchor="middle" font-size="8" fill="#64748b">pve-mini5</text>

  <!-- ===== NODE 6 (bottom-right) ===== -->
  <g filter="url(#shadow)">
    <rect x="612" y="42" width="176" height="215" rx="8" fill="url(#nodeBg)" stroke="#3b82f6" stroke-width="1.5"/>
  </g>
  <rect x="612" y="42" width="176" height="22" rx="8" fill="url(#headerBg)"/>
  <rect x="612" y="56" width="176" height="8" fill="url(#headerBg)"/>
  <use href="#icon-server" x="616" y="45" width="14" height="14" color="#bfdbfe"/>
  <text x="704" y="57" text-anchor="middle" font-size="11" font-weight="700" fill="#ffffff">Node 6</text>
  <rect x="620" y="70" width="160" height="16" rx="4" fill="#1e3a5f"/>
  <use href="#icon-database" x="623" y="72" width="11" height="11" color="#93c5fd"/>
  <text x="704" y="81" text-anchor="middle" font-size="9" fill="#93c5fd">ZFS Pool</text>
  <!-- VMs with purple -->
  <rect x="620" y="91" width="160" height="16" rx="4" fill="#3b0764" stroke="#a855f7" stroke-width="1"/>
  <text x="700" y="102" text-anchor="middle" font-size="9" fill="#e9d5ff">Docker-Main VM</text>
  <rect x="620" y="112" width="160" height="16" rx="4" fill="#3b0764" stroke="#a855f7" stroke-width="1"/>
  <text x="700" y="123" text-anchor="middle" font-size="9" fill="#e9d5ff">Home Assistant VM</text>
  <rect x="620" y="133" width="160" height="16" rx="4" fill="#172554"/>
  <text x="700" y="144" text-anchor="middle" font-size="9" fill="#bfdbfe">Homarr</text>
  <rect x="620" y="154" width="160" height="16" rx="4" fill="#172554"/>
  <text x="700" y="165" text-anchor="middle" font-size="9" fill="#bfdbfe">Caddy-1</text>
  <rect x="620" y="175" width="160" height="16" rx="4" fill="#172554"/>
  <text x="700" y="186" text-anchor="middle" font-size="9" fill="#bfdbfe">NFS-1</text>
  <text x="700" y="249" text-anchor="middle" font-size="8" fill="#64748b">pve-mini6</text>

  <!-- ===== BACKUP INFRASTRUCTURE ===== -->
  <rect x="12" y="275" width="245" height="80" rx="8" fill="#0f172a" stroke="#f59e0b" stroke-width="1.5" stroke-dasharray="4,3"/>
  <text x="134" y="290" text-anchor="middle" font-size="10" font-weight="600" fill="#fde68a">Backup Infrastructure</text>
  <!-- PBS -->
  <rect x="22" y="296" width="100" height="48" rx="6" fill="#1c1209" stroke="#f59e0b" stroke-width="1"/>
  <text x="72" y="311" text-anchor="middle" font-size="9" font-weight="600" fill="#fde68a">PBS</text>
  <text x="72" y="325" text-anchor="middle" font-size="8" fill="#fbbf24">Proxmox Backup</text>
  <text x="72" y="338" text-anchor="middle" font-size="8" fill="#fbbf24">Server</text>
  <!-- NAS -->
  <rect x="136" y="296" width="110" height="48" rx="6" fill="#1c1209" stroke="#f59e0b" stroke-width="1"/>
  <text x="191" y="311" text-anchor="middle" font-size="9" font-weight="600" fill="#fde68a">NAS</text>
  <text x="191" y="325" text-anchor="middle" font-size="8" fill="#fbbf24">NAS-Primary /</text>
  <text x="191" y="338" text-anchor="middle" font-size="8" fill="#fbbf24">NAS-Secondary</text>

  <!-- ===== HA VIPs ===== -->
  <rect x="270" y="275" width="518" height="80" rx="8" fill="#0f172a" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="4,3"/>
  <text x="529" y="290" text-anchor="middle" font-size="10" font-weight="600" fill="#bbf7d0">High Availability — Virtual IPs</text>

  <!-- DNS VIP -->
  <rect x="282" y="296" width="148" height="48" rx="6" fill="#052e16" stroke="#22c55e" stroke-width="1"/>
  <text x="356" y="311" text-anchor="middle" font-size="9" font-weight="600" fill="#bbf7d0">DNS VIP</text>
  <text x="356" y="325" text-anchor="middle" font-size="10" font-weight="700" fill="#4ade80">&lt;VIP&gt;.110</text>
  <text x="356" y="338" text-anchor="middle" font-size="8" fill="#86efac">keepalived</text>

  <!-- Caddy VIP -->
  <rect x="444" y="296" width="148" height="48" rx="6" fill="#052e16" stroke="#22c55e" stroke-width="1"/>
  <text x="518" y="311" text-anchor="middle" font-size="9" font-weight="600" fill="#bbf7d0">Caddy VIP</text>
  <text x="518" y="325" text-anchor="middle" font-size="10" font-weight="700" fill="#4ade80">&lt;VIP&gt;.161</text>
  <text x="518" y="338" text-anchor="middle" font-size="8" fill="#86efac">keepalived</text>

  <!-- NFS VIP -->
  <rect x="606" y="296" width="170" height="48" rx="6" fill="#052e16" stroke="#22c55e" stroke-width="1"/>
  <text x="691" y="311" text-anchor="middle" font-size="9" font-weight="600" fill="#bbf7d0">NFS VIP</text>
  <text x="691" y="325" text-anchor="middle" font-size="10" font-weight="700" fill="#4ade80">&lt;VIP&gt;.165</text>
  <text x="691" y="338" text-anchor="middle" font-size="8" fill="#86efac">keepalived</text>

  <!-- ===== HA DASHED LINES ===== -->
  <!-- DNS: Node3 DNS-Primary -> DNS VIP -->
  <line x1="306" y1="183" x2="306" y2="262" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,3"/>
  <line x1="306" y1="262" x2="356" y2="296" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowHA)"/>
  <!-- DNS: Node5 DNS-Secondary -> DNS VIP -->
  <line x1="506" y1="183" x2="506" y2="262" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,3"/>
  <line x1="506" y1="262" x2="356" y2="296" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowHA)"/>

  <!-- Caddy: Node5 Caddy-2 -> Caddy VIP -->
  <line x1="480" y1="144" x2="480" y2="268" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.6"/>
  <line x1="480" y1="268" x2="518" y2="296" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.6" marker-end="url(#arrowHA)"/>
  <!-- Caddy: Node6 Caddy-1 -> Caddy VIP -->
  <line x1="660" y1="165" x2="660" y2="268" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.6"/>
  <line x1="660" y1="268" x2="518" y2="296" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.6" marker-end="url(#arrowHA)"/>

  <!-- NFS: Node5 NFS-2 -> NFS VIP -->
  <line x1="532" y1="165" x2="532" y2="274" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.5"/>
  <line x1="532" y1="274" x2="691" y2="296" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.5" marker-end="url(#arrowHA)"/>
  <!-- NFS: Node6 NFS-1 -> NFS VIP -->
  <line x1="720" y1="186" x2="720" y2="274" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.5"/>
  <line x1="720" y1="274" x2="720" y2="296" stroke="#22c55e" stroke-width="1" stroke-dasharray="3,4" opacity="0.5" marker-end="url(#arrowHA)"/>

  <!-- ===== LEGEND ===== -->
  <rect x="12" y="368" width="776" height="100" rx="8" fill="#0f172a" stroke="#334155" stroke-width="1"/>
  <text x="400" y="384" text-anchor="middle" font-size="10" font-weight="600" fill="#94a3b8">Legend</text>
  <!-- LXC -->
  <rect x="30" y="392" width="12" height="12" rx="2" fill="#172554" stroke="#3b82f6" stroke-width="1"/>
  <text x="48" y="402" font-size="9" fill="#bfdbfe">LXC Container</text>
  <!-- VM -->
  <rect x="160" y="392" width="12" height="12" rx="2" fill="#3b0764" stroke="#a855f7" stroke-width="1"/>
  <text x="178" y="402" font-size="9" fill="#e9d5ff">Virtual Machine (QEMU)</text>
  <!-- HA -->
  <rect x="340" y="392" width="12" height="12" rx="2" fill="#14532d" stroke="#22c55e" stroke-width="1"/>
  <text x="358" y="402" font-size="9" fill="#bbf7d0">HA-Clustered Service</text>
  <!-- Storage -->
  <rect x="510" y="392" width="12" height="12" rx="2" fill="#1e3a5f" stroke="#93c5fd" stroke-width="1"/>
  <text x="528" y="402" font-size="9" fill="#93c5fd">Storage Backend</text>
  <!-- HA dashed -->
  <line x1="680" y1="398" x2="760" y2="398" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="4,3"/>
  <text x="765" y="402" font-size="9" fill="#64748b">HA Link</text>

  <!-- Storage row 2 -->
  <text x="30" y="430" font-size="9" fill="#64748b">ZFS Pool — redundant, checksummed, snapshots</text>
  <text x="400" y="430" font-size="9" fill="#64748b">LVM-thin SSD — thin-provisioned, fast IOPS</text>

  <!-- Cluster interconnect note -->
  <text x="400" y="455" text-anchor="middle" font-size="9" fill="#475569">Nodes interconnected via corosync cluster ring (Proxmox HA + live migration)</text>
</svg>
