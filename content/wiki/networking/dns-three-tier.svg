<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="clientGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.04"/>
    </linearGradient>
    <linearGradient id="fwGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#ef4444;stop-opacity:0.04"/>
    </linearGradient>
    <linearGradient id="piholeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#22c55e;stop-opacity:0.04"/>
    </linearGradient>
    <linearGradient id="upstreamGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0.04"/>
    </linearGradient>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.12"/>
    </filter>
    <marker id="arrowRight" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8"/>
    </marker>
    <marker id="arrowGreen" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#22c55e"/>
    </marker>
  </defs>

  <rect width="800" height="400" rx="8" fill="#0f172a"/>
  <text x="400" y="28" text-anchor="middle" fill="#e2e8f0" font-size="16" font-weight="600">DNS Three-Tier Architecture</text>

  <!-- Clients zone -->
  <rect x="20" y="50" width="140" height="200" rx="8" fill="url(#clientGrad)" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="90" y="72" text-anchor="middle" fill="#93c5fd" font-size="10" font-weight="600" letter-spacing="0.5">ğŸ‘¥ CLIENTS</text>
  <rect x="35" y="85" width="110" height="30" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="0.6"/>
  <text x="90" y="104" text-anchor="middle" fill="#bfdbfe" font-size="10">ğŸ’» Workstation</text>
  <rect x="35" y="125" width="110" height="30" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="0.6"/>
  <text x="90" y="144" text-anchor="middle" fill="#bfdbfe" font-size="10">ğŸ“± Mobile</text>
  <rect x="35" y="165" width="110" height="30" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="0.6"/>
  <text x="90" y="184" text-anchor="middle" fill="#bfdbfe" font-size="10">ğŸ–¥ï¸ Server</text>

  <!-- Tier 1: Firewall -->
  <rect x="195" y="50" width="200" height="200" rx="8" fill="url(#fwGrad)" stroke="#ef4444" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="295" y="72" text-anchor="middle" fill="#fca5a5" font-size="10" font-weight="600" letter-spacing="0.5">TIER 1: FIREWALL DNS PROXY</text>
  <rect x="215" y="88" width="160" height="60" rx="6" fill="#1e293b" stroke="#ef4444" stroke-width="0.8"/>
  <text x="295" y="108" text-anchor="middle" fill="#fca5a5" font-size="13" font-weight="600">ğŸ”¥ PA-440</text>
  <rect x="225" y="120" width="56" height="16" rx="8" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="253" y="131" text-anchor="middle" fill="#f87171" font-size="8">&lt;5ms Static</text>
  <rect x="289" y="120" width="56" height="16" rx="8" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="317" y="131" text-anchor="middle" fill="#f87171" font-size="8">Cached</text>
  <text x="295" y="175" text-anchor="middle" fill="#94a3b8" font-size="9">Smart routing:</text>
  <text x="295" y="190" text-anchor="middle" fill="#f87171" font-size="9">*.local â†’ Pi-hole</text>
  <text x="295" y="205" text-anchor="middle" fill="#f87171" font-size="9">External â†’ Cloudflare</text>

  <!-- Tier 2: Pi-hole HA -->
  <rect x="430" y="50" width="185" height="200" rx="8" fill="url(#piholeGrad)" stroke="#22c55e" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="523" y="72" text-anchor="middle" fill="#86efac" font-size="10" font-weight="600" letter-spacing="0.5">TIER 2: Pi-hole HA</text>

  <circle cx="523" cy="105" r="20" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
  <text x="523" y="109" text-anchor="middle" fill="#93c5fd" font-size="9" font-weight="600">VIP</text>
  <text x="523" y="119" text-anchor="middle" fill="#64748b" font-size="7">.110</text>

  <rect x="445" y="140" width="70" height="46" rx="6" fill="#1e293b" stroke="#22c55e" stroke-width="0.8"/>
  <text x="480" y="156" text-anchor="middle" fill="#86efac" font-size="9" font-weight="600">Primary</text>
  <text x="480" y="170" text-anchor="middle" fill="#64748b" font-size="7">P: 200</text>
  <text x="480" y="180" text-anchor="middle" fill="#64748b" font-size="7">MASTER</text>

  <rect x="530" y="140" width="70" height="46" rx="6" fill="#1e293b" stroke="#f59e0b" stroke-width="0.8"/>
  <text x="565" y="156" text-anchor="middle" fill="#fde68a" font-size="9" font-weight="600">Secondary</text>
  <text x="565" y="170" text-anchor="middle" fill="#64748b" font-size="7">P: 100</text>
  <text x="565" y="180" text-anchor="middle" fill="#64748b" font-size="7">BACKUP</text>

  <!-- VIP connections -->
  <line x1="508" y1="120" x2="490" y2="140" stroke="#22c55e" stroke-width="0.8" stroke-dasharray="3,3"/>
  <line x1="538" y1="120" x2="555" y2="140" stroke="#22c55e" stroke-width="0.8" stroke-dasharray="3,3"/>

  <!-- Tier 3: Upstream -->
  <rect x="650" y="50" width="130" height="200" rx="8" fill="url(#upstreamGrad)" stroke="#f59e0b" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="715" y="72" text-anchor="middle" fill="#fcd34d" font-size="10" font-weight="600" letter-spacing="0.5">TIER 3: UPSTREAM</text>
  <rect x="665" y="100" width="100" height="44" rx="6" fill="#1e293b" stroke="#f59e0b" stroke-width="0.8"/>
  <text x="715" y="120" text-anchor="middle" fill="#fde68a" font-size="11" font-weight="600">â˜ï¸ Cloudflare</text>
  <text x="715" y="135" text-anchor="middle" fill="#64748b" font-size="9">1.1.1.1</text>

  <!-- Arrows: Clients â†’ Firewall -->
  <line x1="160" y1="140" x2="190" y2="140" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowRight)"/>

  <!-- Arrows: Firewall â†’ Pi-hole (local) -->
  <line x1="395" y1="120" x2="425" y2="120" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
  <text x="410" y="112" text-anchor="middle" fill="#22c55e" font-size="7">*.local</text>

  <!-- Arrows: Firewall â†’ Cloudflare (external) -->
  <path d="M 395 160 Q 520 300 650 122" fill="none" stroke="#f59e0b" stroke-width="1.2" marker-end="url(#arrowRight)"/>
  <text x="520" y="285" text-anchor="middle" fill="#f59e0b" font-size="7">External queries</text>

  <!-- Arrows: Pi-hole â†’ Cloudflare -->
  <line x1="615" y1="165" x2="660" y2="140" stroke="#f59e0b" stroke-width="1" marker-end="url(#arrowRight)"/>

  <!-- Legend -->
  <rect x="20" y="270" width="760" height="110" rx="8" fill="#1e293b" stroke="#475569" stroke-width="0.5"/>
  <text x="40" y="292" fill="#e2e8f0" font-size="11" font-weight="600">DNS Performance Tiers</text>

  <rect x="40" y="305" width="160" height="24" rx="4" fill="#ef4444" opacity="0.08" stroke="#ef4444" stroke-width="0.5"/>
  <text x="120" y="321" text-anchor="middle" fill="#f87171" font-size="9">ğŸš€ Static entry: &lt;5ms</text>

  <rect x="215" y="305" width="160" height="24" rx="4" fill="#ef4444" opacity="0.08" stroke="#ef4444" stroke-width="0.5"/>
  <text x="295" y="321" text-anchor="middle" fill="#f87171" font-size="9">âš¡ FW cached: &lt;10ms</text>

  <rect x="390" y="305" width="170" height="24" rx="4" fill="#22c55e" opacity="0.08" stroke="#22c55e" stroke-width="0.5"/>
  <text x="475" y="321" text-anchor="middle" fill="#4ade80" font-size="9">ğŸ’¨ Pi-hole cached: 10-30ms</text>

  <rect x="575" y="305" width="190" height="24" rx="4" fill="#f59e0b" opacity="0.08" stroke="#f59e0b" stroke-width="0.5"/>
  <text x="670" y="321" text-anchor="middle" fill="#fbbf24" font-size="9">ğŸŒ Full lookup: 50-150ms</text>

  <text x="400" y="360" text-anchor="middle" fill="#64748b" font-size="9">Firewall static entries resolve core infrastructure even if Pi-hole is down</text>
</svg>