<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="clientGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.04"/>
    </linearGradient>
    <linearGradient id="fwGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#ef4444;stop-opacity:0.04"/>
    </linearGradient>
    <linearGradient id="piholeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#22c55e;stop-opacity:0.04"/>
    </linearGradient>
    <linearGradient id="upstreamGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0.04"/>
    </linearGradient>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.12"/>
    </filter>
    <marker id="arrowRight" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8"/>
    </marker>
    <marker id="arrowGreen" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#22c55e"/>
    </marker>
    <symbol id="icon-desktop" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="2" y="3" width="20" height="14" rx="2"/>
      <line x1="8" y1="21" x2="16" y2="21"/>
      <line x1="12" y1="17" x2="12" y2="21"/>
    </symbol>
    <symbol id="icon-phone" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="5" y="2" width="14" height="20" rx="2"/>
      <line x1="12" y1="18" x2="12.01" y2="18"/>
    </symbol>
    <symbol id="icon-server" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="2" y="2" width="20" height="8" rx="2"/>
      <rect x="2" y="14" width="20" height="8" rx="2"/>
      <circle cx="6" cy="6" r="1" fill="currentColor" stroke="none"/>
      <circle cx="6" cy="18" r="1" fill="currentColor" stroke="none"/>
      <line x1="10" y1="6" x2="16" y2="6"/>
      <line x1="10" y1="18" x2="16" y2="18"/>
    </symbol>
    <symbol id="icon-shield" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
    </symbol>
    <symbol id="icon-cloud" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z"/>
    </symbol>
    <symbol id="icon-globe" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="10"/>
      <line x1="2" y1="12" x2="22" y2="12"/>
      <path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/>
    </symbol>
    <symbol id="icon-zap" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
    </symbol>
    <symbol id="icon-check-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
      <polyline points="22 4 12 14.01 9 11.01"/>
    </symbol>
  </defs>

  <rect width="800" height="400" rx="8" fill="#0f172a"/>
  <text x="400" y="28" text-anchor="middle" fill="#e2e8f0" font-size="16" font-weight="600">DNS Three-Tier Architecture</text>

  <!-- Clients zone -->
  <rect x="20" y="50" width="140" height="200" rx="8" fill="url(#clientGrad)" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <use href="#icon-desktop" x="64" y="62" width="14" height="14" color="#93c5fd"/>
  <text x="95" y="72" text-anchor="middle" fill="#93c5fd" font-size="10" font-weight="600" letter-spacing="0.5"> CLIENTS</text>
  <rect x="35" y="85" width="110" height="30" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="0.6"/>
  <use href="#icon-desktop" x="42" y="93" width="13" height="13" color="#bfdbfe"/>
  <text x="96" y="104" text-anchor="middle" fill="#bfdbfe" font-size="10"> Workstation</text>
  <rect x="35" y="125" width="110" height="30" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="0.6"/>
  <use href="#icon-phone" x="42" y="133" width="13" height="13" color="#bfdbfe"/>
  <text x="96" y="144" text-anchor="middle" fill="#bfdbfe" font-size="10"> Mobile</text>
  <rect x="35" y="165" width="110" height="30" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="0.6"/>
  <use href="#icon-server" x="42" y="173" width="13" height="13" color="#bfdbfe"/>
  <text x="96" y="184" text-anchor="middle" fill="#bfdbfe" font-size="10"> Server</text>

  <!-- Tier 1: Firewall -->
  <rect x="195" y="50" width="200" height="200" rx="8" fill="url(#fwGrad)" stroke="#ef4444" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="295" y="72" text-anchor="middle" fill="#fca5a5" font-size="10" font-weight="600" letter-spacing="0.5">TIER 1: FIREWALL DNS PROXY</text>
  <rect x="215" y="88" width="160" height="60" rx="6" fill="#1e293b" stroke="#ef4444" stroke-width="0.8"/>
  <use href="#icon-shield" x="270" y="92" width="16" height="16" color="#fca5a5"/>
  <text x="295" y="108" text-anchor="middle" fill="#fca5a5" font-size="13" font-weight="600"> PA-440</text>
  <rect x="225" y="120" width="56" height="16" rx="8" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="253" y="131" text-anchor="middle" fill="#f87171" font-size="8">&lt;5ms Static</text>
  <rect x="289" y="120" width="56" height="16" rx="8" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="317" y="131" text-anchor="middle" fill="#f87171" font-size="8">Cached</text>
  <text x="295" y="175" text-anchor="middle" fill="#94a3b8" font-size="9">Smart routing:</text>
  <text x="295" y="190" text-anchor="middle" fill="#f87171" font-size="9">*.local → Pi-hole</text>
  <text x="295" y="205" text-anchor="middle" fill="#f87171" font-size="9">External → Cloudflare</text>

  <!-- Tier 2: Pi-hole HA -->
  <rect x="430" y="50" width="185" height="200" rx="8" fill="url(#piholeGrad)" stroke="#22c55e" stroke-width="1.2" filter="url(#shadow)"/>
  <use href="#icon-globe" x="499" y="62" width="14" height="14" color="#86efac"/>
  <text x="523" y="72" text-anchor="middle" fill="#86efac" font-size="10" font-weight="600" letter-spacing="0.5"> TIER 2: Pi-hole HA</text>

  <circle cx="523" cy="105" r="20" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
  <text x="523" y="109" text-anchor="middle" fill="#93c5fd" font-size="9" font-weight="600">VIP</text>
  <text x="523" y="119" text-anchor="middle" fill="#64748b" font-size="7">.110</text>

  <rect x="445" y="140" width="70" height="46" rx="6" fill="#1e293b" stroke="#22c55e" stroke-width="0.8"/>
  <text x="480" y="156" text-anchor="middle" fill="#86efac" font-size="9" font-weight="600">Primary</text>
  <text x="480" y="170" text-anchor="middle" fill="#64748b" font-size="7">P: 200</text>
  <text x="480" y="180" text-anchor="middle" fill="#64748b" font-size="7">MASTER</text>

  <rect x="530" y="140" width="70" height="46" rx="6" fill="#1e293b" stroke="#f59e0b" stroke-width="0.8"/>
  <text x="565" y="156" text-anchor="middle" fill="#fde68a" font-size="9" font-weight="600">Secondary</text>
  <text x="565" y="170" text-anchor="middle" fill="#64748b" font-size="7">P: 100</text>
  <text x="565" y="180" text-anchor="middle" fill="#64748b" font-size="7">BACKUP</text>

  <!-- VIP connections -->
  <line x1="508" y1="120" x2="490" y2="140" stroke="#22c55e" stroke-width="0.8" stroke-dasharray="3,3"/>
  <line x1="538" y1="120" x2="555" y2="140" stroke="#22c55e" stroke-width="0.8" stroke-dasharray="3,3"/>

  <!-- Tier 3: Upstream -->
  <rect x="650" y="50" width="130" height="200" rx="8" fill="url(#upstreamGrad)" stroke="#f59e0b" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="715" y="72" text-anchor="middle" fill="#fcd34d" font-size="10" font-weight="600" letter-spacing="0.5">TIER 3: UPSTREAM</text>
  <rect x="665" y="100" width="100" height="44" rx="6" fill="#1e293b" stroke="#f59e0b" stroke-width="0.8"/>
  <use href="#icon-cloud" x="690" y="106" width="14" height="14" color="#fde68a"/>
  <text x="715" y="120" text-anchor="middle" fill="#fde68a" font-size="11" font-weight="600"> Cloudflare</text>
  <text x="715" y="135" text-anchor="middle" fill="#64748b" font-size="9">1.1.1.1</text>

  <!-- Arrows: Clients → Firewall -->
  <line x1="160" y1="140" x2="190" y2="140" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowRight)"/>

  <!-- Arrows: Firewall → Pi-hole (local) -->
  <line x1="395" y1="120" x2="425" y2="120" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
  <text x="410" y="112" text-anchor="middle" fill="#22c55e" font-size="7">*.local</text>

  <!-- Arrows: Firewall → Cloudflare (external) -->
  <path d="M 395 160 Q 520 300 650 122" fill="none" stroke="#f59e0b" stroke-width="1.2" marker-end="url(#arrowRight)"/>
  <text x="520" y="285" text-anchor="middle" fill="#f59e0b" font-size="7">External queries</text>

  <!-- Arrows: Pi-hole → Cloudflare -->
  <line x1="615" y1="165" x2="660" y2="140" stroke="#f59e0b" stroke-width="1" marker-end="url(#arrowRight)"/>

  <!-- Legend -->
  <rect x="20" y="270" width="760" height="110" rx="8" fill="#1e293b" stroke="#475569" stroke-width="0.5"/>
  <text x="40" y="292" fill="#e2e8f0" font-size="11" font-weight="600">DNS Performance Tiers</text>

  <rect x="40" y="305" width="160" height="24" rx="4" fill="#ef4444" opacity="0.08" stroke="#ef4444" stroke-width="0.5"/>
  <use href="#icon-zap" x="48" y="311" width="12" height="12" color="#f87171"/>
  <text x="128" y="321" text-anchor="middle" fill="#f87171" font-size="9"> Static entry: &lt;5ms</text>

  <rect x="215" y="305" width="160" height="24" rx="4" fill="#ef4444" opacity="0.08" stroke="#ef4444" stroke-width="0.5"/>
  <use href="#icon-zap" x="223" y="311" width="12" height="12" color="#f87171"/>
  <text x="303" y="321" text-anchor="middle" fill="#f87171" font-size="9"> FW cached: &lt;10ms</text>

  <rect x="390" y="305" width="170" height="24" rx="4" fill="#22c55e" opacity="0.08" stroke="#22c55e" stroke-width="0.5"/>
  <use href="#icon-check-circle" x="398" y="311" width="12" height="12" color="#4ade80"/>
  <text x="483" y="321" text-anchor="middle" fill="#4ade80" font-size="9"> Pi-hole cached: 10-30ms</text>

  <rect x="575" y="305" width="190" height="24" rx="4" fill="#f59e0b" opacity="0.08" stroke="#f59e0b" stroke-width="0.5"/>
  <use href="#icon-globe" x="583" y="311" width="12" height="12" color="#fbbf24"/>
  <text x="678" y="321" text-anchor="middle" fill="#fbbf24" font-size="9"> Full lookup: 50-150ms</text>

  <text x="400" y="360" text-anchor="middle" fill="#64748b" font-size="9">Firewall static entries resolve core infrastructure even if Pi-hole is down</text>
</svg>
