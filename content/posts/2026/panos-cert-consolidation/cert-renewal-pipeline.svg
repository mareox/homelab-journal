<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 520" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="certGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.04"/>
    </linearGradient>
    <linearGradient id="fwGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ef4444;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#ef4444;stop-opacity:0.04"/>
    </linearGradient>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.12"/>
    </filter>
    <marker id="arrowDown" viewBox="0 0 10 10" refX="5" refY="10" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 0 L 5 10 z" fill="#94a3b8"/>
    </marker>
    <marker id="arrowRight" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8"/>
    </marker>

    <!-- Icon symbols -->
    <symbol id="icon-key" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
    </symbol>
    <symbol id="icon-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="23 4 23 10 17 10"/>
      <polyline points="1 20 1 14 7 14"/>
      <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
    </symbol>
    <symbol id="icon-chat" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
    </symbol>
    <symbol id="icon-hard-drive" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="22" y1="12" x2="2" y2="12"/>
      <path d="M5.45 5.11L2 12v6a2 2 0 002 2h16a2 2 0 002-2v-6l-3.45-6.89A2 2 0 0016.76 4H7.24a2 2 0 00-1.79 1.11z"/>
      <line x1="6" y1="16" x2="6.01" y2="16"/>
      <line x1="10" y1="16" x2="10.01" y2="16"/>
    </symbol>
    <symbol id="icon-proxmox" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <polygon points="12 2 22 8 22 16 12 22 2 16 2 8"/>
      <polygon points="12 6 18 9.5 18 15.5 12 19 6 15.5 6 9.5"/>
      <line x1="12" y1="2" x2="12" y2="6"/>
      <line x1="22" y1="8" x2="18" y2="9.5"/>
      <line x1="22" y1="16" x2="18" y2="15.5"/>
      <line x1="12" y1="22" x2="12" y2="19"/>
      <line x1="2" y1="16" x2="6" y2="15.5"/>
      <line x1="2" y1="8" x2="6" y2="9.5"/>
    </symbol>
  </defs>

  <!-- Background -->
  <rect width="640" height="520" rx="8" fill="#0f172a"/>

  <!-- Title -->
  <use href="#icon-key" x="288" y="12" width="18" height="18" color="#93c5fd"/>
  <text x="320" y="28" text-anchor="middle" fill="#e2e8f0" font-size="15" font-weight="600">Certificate Renewal Pipeline</text>

  <!-- Step 1: Caddy -->
  <rect x="220" y="48" width="200" height="40" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <use href="#icon-refresh" x="227" y="55" width="14" height="14" color="#60a5fa"/>
  <text x="328" y="72" text-anchor="middle" fill="#bfdbfe" font-size="12" font-weight="600">Caddy Auto-Renew</text>

  <line x1="320" y1="88" x2="320" y2="110" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowDown)"/>
  <text x="428" y="102" fill="#64748b" font-size="8">wildcard cert</text>

  <!-- Step 2: NFS -->
  <rect x="220" y="116" width="200" height="40" rx="6" fill="#1e293b" stroke="#a855f7" stroke-width="1.2" filter="url(#shadow)"/>
  <use href="#icon-hard-drive" x="270" y="127" width="14" height="14" color="#d8b4fe"/>
  <text x="328" y="140" text-anchor="middle" fill="#d8b4fe" font-size="12" font-weight="600">NFS Share</text>

  <line x1="320" y1="156" x2="320" y2="178" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowDown)"/>

  <!-- Step 3: Mount -->
  <rect x="220" y="184" width="200" height="40" rx="6" fill="#1e293b" stroke="#64748b" stroke-width="1" filter="url(#shadow)"/>
  <use href="#icon-proxmox" x="252" y="196" width="12" height="12" color="#f59e0b"/>
  <text x="326" y="208" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="500">pve-mini6 mount</text>

  <line x1="320" y1="224" x2="320" y2="246" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowDown)"/>

  <!-- Step 4: Semaphore -->
  <rect x="200" y="252" width="240" height="40" rx="6" fill="url(#certGrad)" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="320" y="276" text-anchor="middle" fill="#93c5fd" font-size="12" font-weight="600">⏰ Semaphore Playbook (weekly)</text>

  <line x1="320" y1="292" x2="320" y2="314" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowDown)"/>

  <!-- Decision: Compare -->
  <polygon points="320,320 420,345 320,370 220,345" fill="#1e293b" stroke="#f59e0b" stroke-width="1.2"/>
  <text x="320" y="342" text-anchor="middle" fill="#fde68a" font-size="10" font-weight="600">Compare cert</text>
  <text x="320" y="354" text-anchor="middle" fill="#fde68a" font-size="10" font-weight="600">expiry dates</text>

  <!-- Same branch (skip) -->
  <line x1="420" y1="345" x2="560" y2="345" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowRight)"/>
  <text x="480" y="338" fill="#22c55e" font-size="9" font-weight="500">same</text>
  <rect x="565" y="332" width="60" height="26" rx="6" fill="#052e16" stroke="#22c55e" stroke-width="0.8"/>
  <text x="595" y="349" text-anchor="middle" fill="#4ade80" font-size="9">Skip ✓</text>

  <!-- Different branch (deploy) -->
  <line x1="320" y1="370" x2="320" y2="390" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arrowDown)"/>
  <text x="350" y="384" fill="#f59e0b" font-size="9" font-weight="500">different</text>

  <!-- PAN-OS API steps -->
  <rect x="120" y="396" width="400" height="80" rx="8" fill="url(#fwGrad)" stroke="#ef4444" stroke-width="1" filter="url(#shadow)"/>
  <use href="#icon-key" x="128" y="403" width="14" height="14" color="#fca5a5"/>
  <text x="326" y="414" text-anchor="middle" fill="#fca5a5" font-size="11" font-weight="600">PAN-OS XML API</text>
  <rect x="140" y="424" width="80" height="20" rx="4" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="180" y="437" text-anchor="middle" fill="#f87171" font-size="8">1. Import cert</text>
  <rect x="230" y="424" width="72" height="20" rx="4" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="266" y="437" text-anchor="middle" fill="#f87171" font-size="8">2. Import CA</text>
  <rect x="312" y="424" width="72" height="20" rx="4" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="348" y="437" text-anchor="middle" fill="#f87171" font-size="8">3. Import key</text>
  <rect x="394" y="424" width="106" height="20" rx="4" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="0.5"/>
  <text x="447" y="437" text-anchor="middle" fill="#f87171" font-size="8">4. Partial commit</text>
  <text x="320" y="464" text-anchor="middle" fill="#94a3b8" font-size="9">Poll vpn endpoint fingerprint (up to 3 min)</text>

  <!-- Discord notification -->
  <line x1="320" y1="476" x2="320" y2="494" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowDown)"/>
  <rect x="245" y="496" width="150" height="20" rx="6" fill="#1e293b" stroke="#a855f7" stroke-width="0.8"/>
  <use href="#icon-chat" x="260" y="499" width="13" height="13" color="#d8b4fe"/>
  <text x="328" y="510" text-anchor="middle" fill="#d8b4fe" font-size="10" font-weight="500">Discord Notification</text>

  <!-- Skip also goes to discord -->
  <line x1="595" y1="358" x2="595" y2="500" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,3"/>
  <line x1="595" y1="500" x2="400" y2="506" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowRight)"/>
</svg>
